<html>
    <head>
        <title>Twitter Banner Link Shortener</title>
        <link rel="stylesheet" href="form-mini.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

        <script type="text/javascript">

            function not_validate(url) {
                var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
                if (pattern.test(url)) {
                    return false;
                }
                alert(url + " is not a valid url link!");
                return true;

            }

            function checkform() {
                if (not_validate(document.getElementById("url").value)) {
                    return false;
                }
                if (not_validate(document.getElementById("imageURL").value)) {
                    return false;
                }
                return true;
            }

            $(function () {
                $('.form-mini').submit(function (event) {
                    event.preventDefault(); // Stops browser from navigating away from page
                    var $inputs = $('.form-mini :input');

                    // not sure if you wanted this, but I thought I'd add it. get an associative array of just the values.
                    var data = {};
                    $inputs.each(function () {
                        data[this.name] = $(this).val();
                    });

                    console.log(data);
                    // build a json object or do something with the form, store in data
                    $.post('/', data, function (resp) {
                        $(".form-mini-container").remove();

                        var link = document.createElement("a");

                        link.href = "http://metalink.in/" + resp;
                        link.innerHTML = link.href;
                        $("body").append(link);
                        // do something when it was successful
                    });
                });
            });
        </script>
    </head>
    <body>
        <div class="form-mini-container">

            <h1>Generate a twitter card with a proper banner</h1>

            <!---->
            <form class="form-mini" method="POST" onsubmit="return checkform()">
                <div class='form-row'>
                    <label for="url">Link to shorten:</label><br>
                    <input type="text" id="url" name="url" placeholder="Link to shorten"><br>
                </div>

                <div class="form-row">
                    <label for="title">Content title:</label><br>
                    <input type="text" id="title" name="title" placeholder="Card title"><br>
                </div>

                <div class="form-row">
                    <label for="imageURL">Image url:</label><br>
                    <input type="text" id="imageURL" name="imageURL" placeholder="Banner image URL"><br>
                </div>

                <div class="form-row form-last-row">
                    <button type="submit">GENERATE URL</button>
                </div>

            </form>
        </div>
    </body>
</html>